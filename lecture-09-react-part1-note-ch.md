# Lecture 09 React (1)

本篇笔记以 Zhao Long 老师的 Lecture 09 React (Part 1) 的课堂内容整理的随堂笔记



### 0. Introduction

龙哥对他自己的一个简单介绍：龙哥2015年毕业，毕业即失业，没有工作时候就开始学习。两年后的2017，撞到区块链的风口，正式入行。 第一次跳槽，成功从 junior 走到senior，历时1year3month。

- 主要看钱， 同行业跳公司，senior 10月 
- 当时第二个公司，老板比较看重龙哥。 2019年，lead fullstack developer  8 月份， 因为龙哥想从华人圈和startup的圈子跳出去，看一个真正市场是怎么样的，特别想进大厂。
- 18年后，龙哥开始讲课。当时，学生会质疑，因为成长太快，其中，做lead时候，已经摸到了澳洲市场天花板，一直跳到大公司。正好龙哥老婆怀孕，找到工作之后，这个时候举家到美国显得不稳定。所以，从拿到一大堆的offer中，选择了Qantas澳洲航空公司。行情不好，正是来学习技术。2021疫情结束，当时龙哥是以lead往senior跳，本来就是降级，加入Qantas时候，公司允诺升级到Lead，但是因为疫情问题，所以一直没有升级。

- 此时的龙哥已把人生看透了，耗费许多精力，然而已拼不动了，就搁置了美国计划，选择躺平了四年。得出结论：对于第一代移民，能做到lead基本就是天花板了。想想看，再往上走就是管理层。经理>>区块经理>>C-level; 但是对于一个外来人，管理本地人，对这个考量和要求就比其他人人高得多很多。龙哥自认为英语不好和管理投入成本太大，就不想往管理层跳。至于龙哥为什么做讲师，主要是想把蛋糕做大一些。从人数来说，相比三哥和鬼佬，华人只占到20%，你想要立足，必须要更多华人来做it，只有华人做it占比越大，这个情况会有所改变。





找不到工作就是找不到工作，很可能不是你不行，而是因为就业市场差，主要是要摸清整个行业具体在找什么人，要摸清这个边界和诀窍。



此时，龙哥带着我们做了一些小 [我们为什么找不到工作]；

众多同学对这个问题抛出许多答案，如图

![](https://i.imgur.com/CCnUtxL.png)

龙哥说，找不找到工作，跟以上都没有关系。如果有同学不认同，可以去做一个实验，例如把所有的技能树对上，再发简历。为什么我们拼不过三哥三姐，鬼佬，最大原因是因为我们不会写简历。不会写一份符合方想要的简历。如果我们夸过第一步，我们怎么写简历。一个简历，有技能树对上，代码量堆上，有实战项目，很高的代码水平。这样的简历，乐观来说，很可能会有面试机会。



>不会写简历，是因为我们不会写简历，==还是我们不知道什么是好的简历==，
>这是因为我们不知道需要在简历突出什么，达到一个效果：“这个人是符合我们用人要求”。



我们不会写简历，不代表我们不会写以下的简历。
![](https://i.imgur.com/gUySMf0.png)

好的简历是可以显现出你是可以写出高质量代码。





## 1. 什么样的代码是好代码？

> 符合人类思考方式的代码才是好代码





为什么我们要看代码质量，因为在澳洲做IT是一个团队文化。团队文化没有一个人是独狼，都是合作写代码的。只要是合作，就会去读别人的代码，用别人的代码。所以面试官希望你是一个可以deliver一个可读，可维护，可复用，可测试的代码。



写简历的第一个要求： 学习能力强

我们可以从公司的收益角度出发思考，会是什么？

- 公司把你招进来，不希望你一直是junior，都是希望你能快速成长senior。
- 公司培养你，是希望以最低成本使用senior。
- 你只是学习能力比较强，你跟着前辈们学会了很多东西，三个月时间，成为了一个senior， 如果这时候你要去跟公司谈工资，可能公司会给你象征性地提一点，但是如果公司不会把工资提高，你唯一要做的是跳槽，但是这会和公司利益冲突。



那么，怎么把简历体现出你有学习能力？ 怎么能把学习能力点满？

看看中国人怎么做的？我们从小一年级的暑假，就要去学习二年级的东西，因为笨鸟先飞。但是我们真的是笨鸟先飞吗？



学习能力强，可以体现公司和自己对未来2-3年的培养规划，而不是你现在会什么

你今天学习react，能不能够迅速达到2-3年的规划水平？
现在react出到19了 ，正在走下滑坡， Reactcomponent 和nextjs深度绑定了。

你像，netflix 重写了所有的前端项目，谷歌Youtube也在重新写前端项目，所以即便现在把React学得非常好，结果明天出了个新的什么技术，你不会，市场又需要，你怎么办？



> 学习能力强其实是,对你的代码基本概念{代码质量}的一个要求;





**面试题**

Q: ES6 带来的提升是什么？我们为什么需要 ES6?

A: ES6 主要做的是引进了许多新的语法糖而不是（性能提升/运行效率），比如 classname，解构赋值，默认参数，模版字符串等，这些提升旨在提高 JavaScript 的代码质量，通过新的语法糖，提高代码 **1.可读**，**2.可复用** 和 **3.可维护性**，从而提高 JavaScript 的开发和维护效率。

Q: 实现 `getStops`

1. 给定输入的行程数据
2. 计算相应的 Stops
3. 12 个 stops => Dream Trip
4. 24 个 stops => Around the World

Answer:

```js
const SPECIAL_STOPS_MAPPING = {
  0: "Direct",
  12: "Dream Trip",
  24: "Around the World",
};

const plural = (string, count) => {
  if (count > 1) {
    return `${string}s`;
  }

  return string;
};

const getStops = (flights) => {
  const stops = flights.length - 1;

  return SPECIAL_STOPS_MAPPING[stops] || `${stops} ${plural("Stop", stops)}`;
};

const flights = [{ origin: "MEL", destination: "PYG" }];

getStops(flights); // Direct

const flights = [
  { origin: "MEL", destination: "HKG" },
  { origin: "HKG", destination: "PYG" },
];

getStops(flights); // 1 Stop
```





![](https://i.imgur.com/Mx35exz.png)

以上是一个面试题目



很多同学就会啪啪啪，写好一个if-else代码

![](https://i.imgur.com/uEGNbvG.png)



也有一些写的似乎很高级的代码

![](https://i.imgur.com/UijSVni.png)



也有一些这样的



![](https://i.imgur.com/ZsZUO9s.png)



以上的代码，有的乍眼一看，挺简单，有的一看，哇真复杂，但是==好不好维护是一件需要思考的事情==。



毕竟，我们要注意可读性的同时，需要注意可维护性。因为代码是给人看的。
比如说，当你辛苦地写完了一个代码，也是能够工作的代码。恰不好产品经理灵机一动，给你提一个要求：要让用户可以看到去年的，以及今年的的数据。

那么这一来，if-else就不行了。也不是不行，因为改起来麻烦了，要不然就得加班。



假设你现在把这个[能看到去年的]功能加进去了，无论是加班还是摸鱼，做好了。结果，产品经理又继续提一个要求，不仅要能看到往年的，还可以追溯到1983年老数据。这个时候该怎么办？



这里的结论是 写一个代码，不是仅仅要求 可工作，还需要可维护。

因为是一个正常人看到if-else，类的代码就会骂了；中国人就会忍了，但是三哥三姐鬼佬会回头告你了，抓你穿小鞋。



这上面的需求变动，并不是因为产品经理要折磨你（很多时候是），除此之外，澳洲每隔几年都会改税率，一改税率，所以我们需要更新税表。

比如说2024-2025年，的税表变了



![](https://i.imgur.com/I4VhegH.png)



其实，龙哥在这个细节上下了许多功夫，因为先是让你按自己逻辑来写一个税率的function，一般情况下，你可能会写一个非常死板不灵活可能就只是if-else，然后循序渐进地要求你写一个新的税表，请注意这只是一次变动。最后，龙哥说要让你把所有的税表，从1983年到现在的税表，那这个时候该怎么办？即便你有ai，你也会花很久时间去改，在每个改的代码中还不能够犯错误的情况下，一共会有42年的税表历史。



从这里开始，非常容易地意识到以下代码的好：

![](https://i.imgur.com/ZsZUO9s.png)



大家也许是因为感觉以上代码“有点难”，其实很大原因是以上代码是不可读的。因为它发直觉



这时候，龙哥引出什么是好的代码？



可读，可维护，可复用。



当我们解决问题的时候，不要去解决问题，而是按照人类的思考方式去写代码，这样的代码，不仅自然而然地能解决问题，而且达到一个“好代码”原则，还符合人类直觉。



>这个时候，龙哥提出一个场景：假如你是一个已经在澳洲生活多年的人，学弟学妹来澳洲打工，微信你一个问题：“我在XXX打工，一年挣了6万澳币，你能告诉我要怎么交税？“
>
>作为一个人类，你的会怎么解决这个问题？

我们可以想一下大体思路是怎么样的？

我们的基本思考是什么

1. 先找税表
2. 根据它的收入找到相应的税率
  a. 找到相应的行，找到了
3. 根据规则来计算 

第一步是 找到税表，即定义一个税表
首先第一步当然不是去定义一个规则 （if-else）



![](https://i.imgur.com/H2Jj6pr.png)





因为这个税表是一行行的，所以我们可以用array。

第二步，我们根据收入，可以确定我们的税会根据哪一行来进行计算。





![](https://i.imgur.com/eifJS2B.png)







当我们去看这个税表的时候，我们可甚至开始给一些为了计算而需要的值，换成一个概念（实际上是给它放上variable），比如说阈值->breakpoint, $5,092 -> 基础税额 -> baseTax, etc. 

当我们这样一路操作，我们发现“一个概念对应一个值”，那我们是可以用 object（hashtable）



![](https://i.imgur.com/vOhz0ZR.png)







当我们成功地建立了一个税表，我们假设我们的收入是20万澳币，那该怎么办？
我们的脑子会怎么去处理这个信息？

难道是一行行地问自己：“if我的收入是0-18200, nill“，然后自言自语地说”不是“。继续下一行， ”if我的收入是18201 - 45000, 交...“ 接着说“不是”。。。直到找到其中的一行，难道我们的脑子是这样进行信息处理的嘛？

并不是的，所以我们不应该用if-else去写代码。

但是话说回来，再差也能想到一个for loop去处理，也比if-else简单。





![](https://i.imgur.com/sduWxkE.png)





可能更加成熟就会用这个find method

！！！！！！！这个时候，就说明了阅读文档的重要性！！！！！！

以前不想读文档，现在被这个刺激到一定要多读文档



![

](https://i.imgur.com/vFpsgIM.png)



再来看看，这个产品经理要求查看去年的税表，我们会怎么处理？



![](https://i.imgur.com/KuQtCDP.png)



但是产品经理灵光，我们照样可以搞定。

![](https://i.imgur.com/LwYjpUA.png)

写不出来的很大问题是我们把代码神秘化。代码就是复杂的东西，实现高级功能，其实代码是要脚踏实地的，要写好一个代码，就得思考。学会大脑是怎么思考的。

龙哥找第一份工作的时候，感悟到了这个思路：可以直接扔代码图给不会写代码的人，“您能不能看得出我写的这个东西能看得懂吗？”

龙哥还提到“澳洲人一面我，澳洲人说不了三句话，我就知道ta在想什么。如果是一个澳洲developer，ta就在想我一天工作八个小时，四个小时用来聊天，三个小时用来喝咖啡，我只有一个小时用来写代码，我就在想这一个小时里面写最简单的，最不需要过脑的代码。“

三哥三姐的思考方式是什么，“fake it until make it"

中国的一些优良美德，妨碍了我们在外国发展，比如说卷起来，然后把东西做复杂一些，其实就在炫技。比如说问十个中国人，什么样的代码是好的，看不懂的代码就是好的。因为文化就是这样的，人上人的文化。

澳洲人如果看不懂你的代码，肯定是你的问题，不是他们的问题。

龙哥从junior走到senior只用了6个月，3个月适应环境，2个月用来说服老板的龙哥就是senior。



## 2. 高质量的代码

写符合人类思考方式的代码, 在写代码之前充分了解问题，了解人类会如何去思考解决方案。

判断高质量代码的重要四大原则：

- 可读性 Readable
- 可维护性 Maintainable
- 可复用性 Reusable
- 可测试 Testible



或者简单粗暴的**老师的巴掌规则**

1. 一旦写了 if 就给自己一巴掌，写了 else 再给多一巴掌。
2. 每次 copy paste，给自己一巴掌。
3. 如果考虑到了未来，给自己一巴掌。



- 变量命名需要具有描述性
- Don't repeat yourself
- keep it simple, stupid
- 不要为未来设计代码，不要添加当前不需要的功能
- 即使代码已经工作，也应该回顾和改进





## 3. SOLID 原则 - 绝世武功秘籍

- 面向对象编程
- 面向对象设计

原则使得一个程序员开发一个容易进行软件维护和开发的

只练三个原则，SOD （只记得SO和一个半D





1. 单一职责原则（single responsiblity principle）

   一个代码块只负责一项任务

2. 开放封闭原则（open/ clode principle）

   对拓展开放，对修改封闭

3. 里氏替换原则（Liskov Substitution principle）

   子类应该能替换其基类并能透明地工作。

4. 接口隔离原则（Interface Segregation Principle）

   客户端不应该依赖于它不使用的接口。

5. 依赖倒置原则（Dependence Inversion Principle）

   高层模块不应依赖于底层模块，他们都应该依赖于抽象。

6. 依赖注入原则（dependency injection principle）

   一个代码块的依赖应该由外部注入，而不是耦合在实现逻辑里

> 在 JavaScript 中 3，4，5 使用的不是很多，因此可以简化为 SOD

但不需要全武功秘籍，只需要半本

**SOD**

1. 单一职责原则（single responsiblity principle）

   一个代码块只负责一项任务

2. 开放封闭原则（open/ clode principle）

   对拓展开放，对修改封闭

3. 依赖注入原则（dependency injection principle）

   一个代码块的依赖应该由外部注入，而不是耦合在实现逻辑里









> 好的代码写三遍。将之前的代码重复写，尽量实践 SOD 和符合人类思维方式的原则。

#### 为什么if-else代码不好？

![](https://i.imgur.com/7Ynu8n8.png)

#### 实践单一职责原则：

可不可以把代码分成多块代码区域，每块代码有自己的责任，同时每一块代码的责任不重复。

比如说我们只看第一 `if (income > 0 && income <= 18200)`,你能理解它要完成什么功能吗？它是没办法担当一个责任的，比如说我们的任务是找到税率然后计算tax。所以它不能。 （比如说有18201， 不就完成不了这一个任务了吗？），单一原则指的是可以完成任何扔过来的任务。





#### 实践开闭原则 Open/Closed Principle

![](https://i.imgur.com/cE0ayas.png)

- 当你考虑未来会有更新代码的时候，你的代码是易于拓展的，而不是要通过修改代码来完成更新的

再回到if-else里面，我们的税表换了，需要改了，但if-else将整个逻辑糅合起来，要想完成这次更新，那就必须要修改这个代码了。



可不可以找到核心代码块，后续扩展可不可以不碰核心代码块。

所以if-else那种写法不适合开放和封闭

####  Dependency injection principle 实践依赖注入原则：

有没有依赖，依赖是不是注入进来的？依赖就是外部给定的数据，产品需求就是依赖，而不是代码自带的逻辑。

在我们税表的计算中，对税表的定义是它的一个依赖。
比如说我们计算3x3等于几，你需要用到九九乘法口则。
九九乘法口诀是一个独立自洽的东西，而是你的一个依赖
而不是说别人问你3x3等于几，你来说等一下我现写一个九九乘法口诀。

税表是一个依赖，依赖是单独声明，注入进来，而不应该耦合在现有逻辑里面来。



![](https://i.imgur.com/KuQtCDP.png)

我的代码符不符合这个半本武功秘籍，如果不符合，就需要优化。





### 成为senior developer的另一个办法

- 但凡写 if-else 的代码
- 但凡写一次注释
- 但凡写一次循环

国内代码不注重代码质量，所以才需要注释





#### 为什么不写注释
龙哥说，“让代码自己说话”，大前提是JavaScript和Python

![](https://i.imgur.com/LFK7eAI.png)

是因为for loop不可读，比如说拿这个去给普通人看，因为普通人看不了for loop

另外一个情况是命名

![](https://i.imgur.com/uzCaenm.png)


不要用注释来解释代码本身就可以用来解释的东西。

不写注释不代表摆烂

一种救急情况是再套一个函数，让代码自己说话

![](https://i.imgur.com/7z9XALv.png)


![](https://i.imgur.com/bC4aTpO.png)

如果你的业务逻辑复杂，就把这个业务逻辑单独抽出来，抽象成一个方法，利用方法名来解释这一个业务逻辑，方法套方法，只要抽象到足够细致的时候，方法名就足够能够解释业务逻辑。

让一个没有任何知识的你去理解汽车是怎么工作的，你是不可能理解的，你需要说明书。

但如果我们这样来告诉你，
- 汽车有个东西叫方向盘，转动方向盘的这个方法名字叫做控制汽车的方向，
- 汽车有个东西叫油门踏板，当你使用踏板时候，这个汽车会开始走动，这个踩动踏板的方法名叫做控制速度。
- 汽车有个东西叫刹车，当你使用刹车，这个汽车会减速，所以这个刹车的方法名叫减速。

国内的高压的环境下，是没办法和没时间去这样命名的。以时间为准，毕竟是要交付。996都没办法完成的工作，哪来办法来细细打磨代码质量。

基于澳洲文化，走中国狼性文化，走澳洲特色中国狼性文化。







#### 什么时候可以用if-else

在做边界检查的时候。





- 还是要多看文档


龙哥刷题的三个月总结出来的一个道理，正如国内为什么只招985和211，只招硕士生，其实并不是说不招，而是用简单粗暴的方法，筛选ta认为不好的人，ta认为不努力的人。

但美国国情不一样，美国的精英教育不是怎么广泛，所以不能够用毕业院校来刷人，如果真的用毕业院校来刷人，那很可能就没有人了。

刷题走的是美国那套思路，刷题主要是用来刷掉懒人的。

凡事刷不过medium 的人，要不然说明你不够有毅力，或者你理解能力太差，自然而然就淘汰掉这些人了。

澳洲通过代码质量来筛选人。

没有这个文化背景，很难产生共鸣

要把红色赤子之心抛掉，才能够在其他地方蓬勃发展。

三哥三姐就是说的要比做得好的人，针对readable，maintable说得天花乱坠的，三哥三姐能力不行，但是这些东西真的需要很牛的能力吗？只要能写readable，maintable，reusable不需要技术多么扎实和牛，是可以假装写出来的。









### 为什么说澳洲是需要一个懂得团队文化的dev？

澳洲人口一共26M
![](https://i.imgur.com/QXqFIEp.png)

我们用3千万人来说，我们把老弱病残幼（40%）除去，再出掉5%的不依赖网络的人，就算你开发出一个爆款项目，澳洲每一个人都会用你的产品，1.6千万用户全天用你的网站，会用手机，不吃不喝用你的网站，每分每秒都在用，你的网站压力也才是1.6千万每秒，最大并发量也才1.6千万。比如说淘宝双十一， 并发量是以亿级别来算的。

所以，钻研订票系统，把澳洲每一个人都能订到机票，龙哥提到quantas订票系统的压力可能直到几万压力，跟春运十亿级别的压力根本不算事。

我是一条独狼，高手钻研代码性能，卷技术，卷performance， 甚至钻研（国内的performance的方案），在澳洲一个只有千万级别的并发，那说明是走错方向了。

因为澳洲没有技术土壤， 所以澳洲看重代码层层面上的团队协作文化。



再比如说如果你是科班出身，你可能会有一个体验。曾经的一个小组作业，会经常出现一个队里面，有一些同学能力不好，或者态度不好，或者根本就不主动。所以自己可能会有一种想法：”如果让我一个人写，我早就写完了，为什么我要和三个傻子一起组队。“经常，会有一种冲动，宁愿一个人写完了，都不愿意和他们一起写。甚至会出现，把别人的代码拿过来，结果搞到我的代码都不能工作了。然后吐槽”这个人，我最好这辈子都不要碰见。“

其实这个时候，你真正在批判的，不是这个人和这个人的能力，而是这个人的代码质量。就算这个人的能力差，写出代码不工作，我可以帮你修，帮你改，但是发现改不动，修不动。这比代码冲突更可怕，你什么都没干，只是把ta的代码拉进来了，这个软件不能工作了，你的代码不能，ta的代码也不能。结果就互相撕逼，“我的代码在我的电脑可以工作。”，“不对啊，我的代码在我的电脑也可以工作。”开始了踢皮球。

但是奇怪的是，你的代码实现了一个功能，我的代码实现另外一个功能，可是合在一起就不工作了。那究竟是什么原因？

假设现在你进入quantas工作，如果你写的代码被merge进去了，然后整个项目崩了，这个时候出现的问题是什么？你总不能说“肯定是你们的问题，你们的代码我读不了。”这种锅是甩不了的。
很大问题是你没有读代码！你必须仔仔细细读，这里是做这个，那里是做个，看到一个代码可以加入一些功能，就开始加。

所以澳洲招的是什么人


我们学的是代码的质量。



思维逻辑问题 - 学的是心法

符合人类思考的代码是好的代码
当我们解决问题的时候，不要去解决问题，而是按照人类的思考方式去写代码，这样的代码自然而然地能解决问题
